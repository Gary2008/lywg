package com.game.net.m24;

import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParser;
import com.google.gson.stream.JsonReader;
import org.frkd.io.InputByteArray;
import org.frkd.io.OutputByteArray;
import org.frkd.net.socket.protocol.BasicMessage;

import java.io.StringReader;


/**
 * 六月 28, 2014 5:05:33 下午 org.frkd.net.socket.protocol.ParserManager handlerMessage
非常详细: received message,class is class com.game.net.m24.M2401 , messageType:2401 , data:[1, 3, 33, 123, 34, 116, 121, 112, 101, 34, 58, 48, 44, 34, 110, 112, 99, 73, 100, 34, 58, 49, 50, 49, 48, 53, 44, 34, 116, 97, 108, 107, 34, 58, 34, 35, 38, 116, 97, 108, 107, 95, 108, 105, 110, 101, 35, 38, 92, 110, 32, -26, -81, -113, -27, -92, -87, -27, -72, -82, -26, -120, -111, -23, -128, -127, -25, -127, -75, -27, -123, -67, 44, -26, -120, -111, -27, -113, -81, -28, -69, -91, -25, -69, -103, -28, -67, -96, 60, 102, 111, 110, 116, 32, 99, 111, 108, 111, 114, 61, 92, 34, 35, 70, 69, 55, 57, 48, 50, 92, 34, 62, 91, -25, -127, -75, -27, -123, -67, -25, -78, -66, -23, -83, -126, 93, 60, 47, 102, 111, 110, 116, 62, 44, -27, -113, -86, -24, -90, -127, 92, 110, 32, -26, -100, -119, -24, -74, -77, -27, -92, -97, -25, -102, -124, -25, -127, -75, -27, -123, -67, -25, -78, -66, -23, -83, -126, 44, -26, -120, -111, -27, -113, -81, -28, -69, -91, -27, -72, -82, -28, -67, -96, -27, -113, -84, -27, -108, -92, -27, -121, -70, -25, -127, -75, -27, -123, -67, 44, -25, -127, -75, -27, -123, -67, -27, -123, -73, 92, 110, 32, -26, -100, -119, 60, 102, 111, 110, 116, 32, 99, 111, 108, 111, 114, 61, 92, 34, 35, 70, 69, 55, 57, 48, 50, 92, 34, 62, -24, -74, -123, -23, -85, -104, -26, -108, -69, -27, -121, -69, 60, 47, 102, 111, 110, 116, 62, 44, -27, -113, -81, -28, -69, -91, -24, -66, -123, -27, -118, -87, -28, -67, -96, -27, -115, -121, -25, -70, -89, -26, -99, -128, -26, -128, -86, -27, -106, -108, 92, 110, 35, 38, 116, 97, 108, 107, 95, 108, 105, 110, 101, 35, 38, 92, 110, 32, -28, -69, -118, -27, -92, -87, -26, -118, -92, -23, -128, -127, -25, -127, -75, -27, -123, -67, -27, -119, -87, -28, -67, -103, -26, -84, -95, -26, -107, -80, -17, -68, -102, 60, 102, 111, 110, 116, 32, 99, 111, 108, 111, 114, 61, 92, 34, 35, 70, 70, 70, 70, 48, 48, 92, 34, 62, 49, -26, -84, -95, 60, 47, 102, 111, 110, 116, 62, 32, 32, 32, 32, 60, 117, 62, 60, 97, 32, 104, 114, 101, 102, 61, 39, 101, 118, 101, 110, 116, 58, 77, 50, 52, 48, 50, 44, 52, 39, 62, -27, -113, -84, -27, -108, -92, -25, -127, -75, -27, -123, -67, -24, -81, -90, -26, -125, -123, 60, 47, 97, 62, 60, 47, 117, 62, 92, 110, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 60, 117, 62, 60, 97, 32, 104, 114, 101, 102, 61, 39, 101, 118, 101, 110, 116, 58, 77, 50, 52, 48, 50, 44, 57, 39, 62, -24, -76, -83, -28, -71, -80, -26, -118, -92, -23, -128, -127, -26, -84, -95, -26, -107, -80, 60, 47, 97, 62, 60, 47, 117, 62, 92, 110, 35, 38, 116, 97, 108, 107, 95, 108, 105, 110, 101, 35, 38, 92, 110, 32, -25, -127, -75, -27, -123, -67, -25, -83, -119, -25, -70, -89, -24, -81, -76, -26, -104, -114, -17, -68, -102, 32, 32, 32, 32, 92, 110, 32, 32, 32, 32, 32, 32, 32, 32, 32, 60, 102, 111, 110, 116, 32, 99, 111, 108, 111, 114, 61, 92, 34, 35, 70, 70, 70, 70, 48, 48, 92, 34, 62, -25, -91, -98, -27, -123, -67, -27, -80, -113, -24, -115, -119, 91, 50, -26, -104, -97, 93, 60, 47, 102, 111, 110, 116, 62, 32, 32, 32, 32, 60, 102, 111, 110, 116, 32, 99, 111, 108, 111, 114, 61, 92, 34, 35, 56, 52, 67, 49, 70, 70, 92, 34, 62, -28, -69, -103, -27, -80, -66, -25, -127, -75, -25, -117, -112, 91, 51, -26, -104, -97, 93, 60, 47, 102, 111, 110, 116, 62, 92, 110, 32, 32, 32, 32, 32, 32, 32, 32, 32, 60, 102, 111, 110, 116, 32, 99, 111, 108, 111, 114, 61, 92, 34, 35, 48, 48, 70, 70, 70, 70, 92, 34, 62, -27, -81, -110, -23, -100, -100, -25, -103, -67, -24, -103, -114, 91, 52, -26, -104, -97, 93, 60, 47, 102, 111, 110, 116, 62, 32, 32, 32, 32, 60, 102, 111, 110, 116, 32, 99, 111, 108, 111, 114, 61, 92, 34, 35, 70, 70, 48, 48, 48, 48, 92, 34, 62, -25, -114, -124, -24, -89, -110, -23, -99, -110, -23, -66, -103, 91, 53, -26, -104, -97, 93, 60, 47, 102, 111, 110, 116, 62, 92, 110, 35, 38, 116, 97, 108, 107, 95, 108, 105, 110, 101, 35, 38, 92, 110, 34, 125, 0]
{"type":0,"npcid":12105,"talk":"#&talk_line#&\n 每天帮我送灵兽,我可以给你<font color=\"#fe7902\">[灵兽精魂]</font>,只要\n 有足够的灵兽精魂,我可以帮你召唤出灵兽,灵兽具\n 有<font color=\"#fe7902\">超高攻击</font>,可以辅助你升级杀怪喔\n#&talk_line#&\n 今天护送灵兽剩余次数：<font color=\"#ffff00\">1次</font>    <u><a href='event:m2402,4'>召唤灵兽详情</a></u>\n                              <u><a href='event:m2402,9'>购买护送次数</a></u>\n#&talk_line#&\n 灵兽等级说明：    \n         <font color=\"#ffff00\">神兽小草[2星]</font>    <font color=\"#84c1ff\">仙尾灵狐[3星]</font>\n         <font color=\"#00ffff\">寒霜白虎[4星]</font>    <font color=\"#ff0000\">玄角青龙[5星]</font>\n#&talk_line#&\n"}
六月 28, 2014 5:05:33 下午 org.frkd.net.socket.protocol.ParserManager handlerMessage
非常详细: received message,class is class com.game.net.m24.M2401 , messageType:2401 , data:[1, 1, 97, 123, 34, 116, 121, 112, 101, 34, 58, 48, 44, 34, 110, 112, 99, 73, 100, 34, 58, 49, 50, 49, 48, 53, 44, 34, 116, 97, 108, 107, 34, 58, 34, 32, -27, -67, -109, -27, -119, -115, -26, -118, -92, -23, -128, -127, -25, -127, -75, -27, -123, -67, -17, -68, -102, 60, 102, 111, 110, 116, 32, 99, 111, 108, 111, 114, 61, 92, 34, 35, 70, 70, 70, 70, 48, 48, 92, 34, 62, -25, -91, -98, -27, -123, -67, -27, -80, -113, -24, -115, -119, 91, 50, -26, -104, -97, 93, 60, 47, 102, 111, 110, 116, 62, 32, 32, 32, 32, 60, 117, 62, 60, 97, 32, 104, 114, 101, 102, 61, 39, 101, 118, 101, 110, 116, 58, 77, 50, 52, 48, 50, 44, 50, 39, 62, -27, -120, -73, -26, -106, -80, -25, -83, -119, -25, -70, -89, 60, 47, 97, 62, 60, 47, 117, 62, 92, 110, 32, 60, 102, 111, 110, 116, 32, 99, 111, 108, 111, 114, 61, 92, 34, 35, 65, 54, 65, 54, 48, 48, 92, 34, 62, -26, -77, -88, 58, -26, -81, -113, -26, -84, -95, -27, -120, -73, -26, -106, -80, -23, -100, -128, -24, -90, -127, 53, 48, 48, 48, 48, -23, -121, -111, -27, -72, -127, 60, 47, 102, 111, 110, 116, 62, 32, 32, 32, 32, 32, 32, 32, 60, 117, 62, 60, 97, 32, 104, 114, 101, 102, 61, 39, 101, 118, 101, 110, 116, 58, 77, 50, 52, 48, 50, 44, 51, 39, 62, -27, -90, -126, -28, -67, -107, -24, -114, -73, -27, -113, -106, -23, -121, -111, -27, -72, -127, 63, 60, 47, 97, 62, 60, 47, 117, 62, 92, 110, 92, 110, 32, -27, -91, -106, -27, -118, -79, -17, -68, -102, 60, 102, 111, 110, 116, 32, 99, 111, 108, 111, 114, 61, 92, 34, 35, 70, 69, 55, 57, 48, 50, 92, 34, 62, -25, -127, -75, -27, -123, -67, -25, -78, -66, -23, -83, -126, -27, -128, -68, 32, 120, 32, 49, 48, 48, 48, 60, 47, 102, 111, 110, 116, 62, 92, 110, 34, 125, 0]
{"type":0,"npcid":12105,"talk":" 当前护送灵兽：<font color=\"#ffff00\">神兽小草[2星]</font>    <u><a href='event:m2402,2'>刷新等级</a></u>\n <font color=\"#a6a600\">注:每次刷新需要50000金币</font>       <u><a href='event:m2402,3'>如何获取金币?</a></u>\n\n 奖励：<font color=\"#fe7902\">灵兽精魂值 x 1000</font>\n"}
六月 28, 2014 5:05:33 下午 org.frkd.net.socket.protocol.ParserManager handlerMessage
非常详细: received message,class is class com.game.net.m24.M2401 , messageType:2401 , data:[1, 0, 106, 123, 34, 116, 121, 112, 101, 34, 58, 48, 44, 34, 110, 112, 99, 73, 100, 34, 58, 49, 50, 49, 48, 53, 44, 34, 116, 97, 108, 107, 34, 58, 34, 92, 110, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 60, 117, 62, 60, 97, 32, 104, 114, 101, 102, 61, 39, 101, 118, 101, 110, 116, 58, 77, 50, 52, 48, 50, 44, 49, 39, 62, -25, -85, -117, -27, -115, -77, -26, -118, -92, -23, -128, -127, 60, 47, 97, 62, 60, 47, 117, 62, 60, 98, 114, 62, 34, 125, 0]
{"type":0,"npcid":12105,"talk":"\n                   <u><a href='event:m2402,1'>立即护送</a></u><br>"}
 *
 *
 */
public class M2401 extends BasicMessage{
	
	public  JsonObject talkObj;
	public  int _npcId;

	@Override
	public void decode(byte[] data) {
		InputByteArray dis = new InputByteArray(data);
		dis.skipBytes(1);
		
		String json = dis.readUTF();
		JsonParser jp = new JsonParser();
		JsonReader jr = new JsonReader(new StringReader(json.toLowerCase()));
		jr.setLenient(true);
		JsonElement je = jp.parse(jr);
		talkObj = je.getAsJsonObject();

	}
	
	@Override
	public byte[] encode(byte[] data) {
		OutputByteArray dos = new OutputByteArray();
		dos.writeByte(0);
		dos.writeInt(this._npcId);
		return super.encode(dos.toByteArray());
	}

	@Override
	public String toString() {
		return "M2401{" +
				"talkObj=" + talkObj +
				", _npcId=" + _npcId +
				'}';
	}
}
